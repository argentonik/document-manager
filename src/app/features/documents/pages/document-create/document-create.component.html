<app-back-button (click)="toDocumentsList()"></app-back-button>

<mat-card class="card">
  <mat-card-title>Document creation</mat-card-title>

  <form [formGroup]="form" (ngSubmit)="create(true)" class="form">
    <mat-form-field>
      <mat-label>Name</mat-label>
      <input matInput formControlName="name">

      @if (form.controls.name.errors?.['required']) {
        <mat-error>Document name is required</mat-error>
      }
      @if (form.controls.name.errors?.['minlength']) {
        <mat-error>Document name must be at least {{ form.controls.name.errors?.['minlength'].requiredLength }}
          characters long
        </mat-error>
      }
      @if (form.controls.name.errors?.['maxlength']) {
        <mat-error>Document name must be at most {{ form.controls.name.errors?.['maxlength'].requiredLength }}
          characters long
        </mat-error>
      }
    </mat-form-field>

    <div>
      <file-pond
        #myPond
        [options]="pondOptions"
        (onaddfile)="pondHandleAddFile($event)"
        (onremovefile)="pondHandleRemoveFile()"
      >
      </file-pond>

      @if (form.controls.file['touched'] && form.controls.file.errors?.['required']) {
        <mat-error class="smr error">Document is required</mat-error>
      }
    </div>

    <mat-card-actions class="actions">
      <button mat-button (click)="create(false)">
        <mat-icon>assignment</mat-icon>
        Save as draft
      </button>
      <button mat-flat-button (click)="create(true)">
        <mat-icon>send</mat-icon>
        Send to Review
      </button>
    </mat-card-actions>
  </form>
</mat-card>
